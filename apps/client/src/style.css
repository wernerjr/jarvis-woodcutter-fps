:root{
  color-scheme: dark;
  --bg: #0a0f0a;
  --fg: #e7f0e7;
  --muted: rgba(231,240,231,0.72);
  --card: rgba(10, 18, 10, 0.86);
  --stroke: rgba(231,240,231,0.10);
  --accent: #9ff5a8;
}
html,body{height:100%; margin:0; background:var(--bg); overflow:hidden; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;}

/* Imersão: evitar seleção acidental de texto na UI */
#ui, #ui *:not(input):not(textarea){
  -webkit-user-select:none;
  -moz-user-select:none;
  -ms-user-select:none;
  user-select:none;
}
input, textarea{
  -webkit-user-select:text;
  -moz-user-select:text;
  -ms-user-select:text;
  user-select:text;
}

#game{position:fixed; inset:0; width:100%; height:100%; display:block; outline:none;}

/* UI root */
#ui{position:fixed; inset:0; pointer-events:none; color:var(--fg);}

/* HUD */
#hud{position:fixed; inset:0;}
#title{position:fixed; top:14px; left:16px; font-weight:700; letter-spacing:.2px; text-shadow:0 2px 12px rgba(0,0,0,.6)}
#stats{position:fixed; top:14px; right:16px; font-weight:600; font-size:14px; text-shadow:0 2px 12px rgba(0,0,0,.6)}
.hudBuffLine{position:fixed; top:34px; right:16px; text-shadow:0 2px 12px rgba(0,0,0,.6)}

#timeHud{position:fixed; top:12px; left:50%; transform: translateX(-50%); width:min(520px, calc(100vw - 32px)); pointer-events:none;}
#timeRow{display:flex; align-items:center; justify-content:space-between; gap:10px; color:var(--muted); font-size:12px; text-shadow:0 2px 12px rgba(0,0,0,.6)}
#clock{font-variant-numeric: tabular-nums; color:var(--fg); font-weight:700; letter-spacing:0.3px;}
#timeIcons{display:flex; align-items:center; gap:8px;}
#icoSun,#icoMoon{opacity:0.55; filter: drop-shadow(0 2px 10px rgba(0,0,0,.45)); transition: opacity .15s ease, transform .15s ease;}
#icoSun.active,#icoMoon.active{opacity:1; transform: translateY(-1px) scale(1.04)}
#timeBar{margin-top:6px; height:8px; border-radius:999px; border:1px solid var(--stroke);
  background: linear-gradient(90deg,
    rgba(25,35,60,0.55) 0%,
    rgba(18,24,44,0.55) 18%,
    rgba(75,120,190,0.40) 30%,
    rgba(120,180,255,0.35) 50%,
    rgba(255,170,120,0.30) 70%,
    rgba(18,24,44,0.55) 82%,
    rgba(25,35,60,0.55) 100%
  );
}
#timeMarker{width:12px; height:12px; border-radius:999px; margin-top:-3px; background: rgba(231,240,231,0.85); border:1px solid rgba(0,0,0,0.25); box-shadow:0 6px 18px rgba(0,0,0,.35); transform: translateX(0px)}
#toast{position:fixed; top:46px; left:16px; font-size:12px; color:var(--muted); opacity:0; transform: translateY(-4px); transition: opacity .15s ease, transform .15s ease; text-shadow:0 2px 12px rgba(0,0,0,.6); white-space:pre-line}

#floaters{position:fixed; inset:0; pointer-events:none;}
.dmg{position:absolute; left:0; top:0; padding:2px 6px; border-radius:10px; font-size:14px; font-weight:800; letter-spacing:0.2px; color: rgba(255,215,140,0.98); text-shadow: 0 2px 12px rgba(0,0,0,0.75); background: rgba(0,0,0,0.10); border: 1px solid rgba(255,200,120,0.12);}

.perf{position:fixed; top:104px; left:16px; font-size:12px; color:var(--fg); background: rgba(10,18,10,0.55); border:1px solid var(--stroke); border-radius:12px; padding:8px 10px; width:190px; text-shadow:0 2px 12px rgba(0,0,0,.6)}
.perf.hidden{display:none;}
#toast.show{opacity:1; transform: translateY(0px)}
#toast .rareLoot{color:#ffd84d;font-weight:700}
#reticle{position:fixed; left:50%; top:50%; width:10px; height:10px; margin-left:-5px; margin-top:-5px; border:1px solid rgba(231,240,231,0.9); border-radius:50%; box-shadow:0 0 0 2px rgba(0,0,0,.25);}

#hotbar{position:fixed; left:50%; bottom:14px; transform: translateX(-50%); display:flex; gap:10px; pointer-events:auto; z-index: 60;}
.hotSlot{display:flex; flex-direction:column; align-items:center; justify-content:center; gap:6px; min-height:58px; width:78px; padding:10px; text-align:center; background: rgba(10,18,10,0.55)}
.hotSlot.fixed{opacity:0.95}
.hotSlot.drop{border-color: rgba(159,245,168,0.55); background: rgba(159,245,168,0.10)}
.hotSlot.active{border-color: rgba(159,245,168,0.55); background: rgba(159,245,168,0.12); transform: translateY(-1px);}
.hotNum{font-size:11px; color:var(--muted); border:1px solid rgba(231,240,231,0.10); border-radius:999px; padding:1px 6px; width:max-content;}
.hotIco{font-size:20px; line-height:1; color:var(--fg)}
.hotDur{width:100%; height:5px; border-radius:999px; overflow:hidden; border:1px solid rgba(231,240,231,0.08); background: rgba(0,0,0,0.20)}
.hotDurFill{height:100%; width:0%; background: rgba(159,245,168,0.75)}

/* Drag safety: only allow dragging hotbar when inventory is open */
body.inventory-open #hotbar{pointer-events:auto;}
body:not(.inventory-open) #hotbar .hotSlot{user-select:none;}

/* Generic */
.hidden{display:none !important;}

/* Overlays */
.hitmarker{position:fixed; left:50%; top:50%; width:14px; height:14px; transform: translate(-50%, -50%); pointer-events:none; z-index:25; opacity:0.0;}
.hitmarker::before,.hitmarker::after{content:""; position:absolute; left:50%; top:50%; width:14px; height:2px; background: rgba(255,255,255,0.86); border-radius:2px; transform: translate(-50%,-50%) rotate(45deg); box-shadow:0 0 8px rgba(0,0,0,0.45)}
.hitmarker::after{transform: translate(-50%,-50%) rotate(-45deg)}
.hitmarker.show{opacity:1.0; animation: hitpop 130ms ease-out;}
@keyframes hitpop{0%{transform:translate(-50%,-50%) scale(0.65)} 100%{transform:translate(-50%,-50%) scale(1.0)}}

.overlay{position:fixed; inset:0; display:flex; align-items:center; justify-content:center; padding:24px; background: radial-gradient(1000px 600px at 50% 40%, rgba(10,18,10,0.72), rgba(0,0,0,0.80)); pointer-events:none; z-index: 20;}
.overlay.block{pointer-events:auto;}
.overlay.hidden{display:none;}

/* Splash background */
#menu.overlay, #pause.overlay, #options.overlay{background: radial-gradient(1200px 700px at 20% 15%, rgba(74,163,255,.22), transparent 60%),
              radial-gradient(900px 600px at 85% 25%, rgba(159,245,168,.18), transparent 55%),
              linear-gradient(180deg, rgba(0,0,0,.72), rgba(0,0,0,.78));}

/* Loading */
#loading.overlay{pointer-events:auto; z-index: 40;}
.loading-lock #ui > *:not(#loading){pointer-events:none !important;}
.loading-lock #loading{pointer-events:auto !important;}

.loadingCard{width:min(520px, 92vw)}
.loadingTitle{font-size:20px; font-weight:800; margin-bottom:6px}
.loadingBar{height:10px; border-radius:999px; overflow:hidden; background:rgba(255,255,255,.10); border:1px solid rgba(255,255,255,.08); margin-top:10px}
.loadingBarFill{height:100%; width:25%; background:linear-gradient(90deg, rgba(74,163,255,.9), rgba(159,245,168,.9)); border-radius:999px}
.card{width:min(520px, calc(100vw - 48px)); background:var(--card); border:1px solid var(--stroke); border-radius:16px; padding:18px 18px 16px; box-shadow: 0 18px 70px rgba(0,0,0,.55); backdrop-filter: blur(8px); pointer-events:auto;}
.card h1{margin:0 0 6px; font-size:22px; letter-spacing:.2px;}
.card h2{margin:0 0 10px; font-size:18px;}
.muted{margin:6px 0 12px; color:var(--muted); line-height:1.4}
.small{font-size:12px;}

.row{display:flex; flex-direction:column; gap:6px; margin:10px 0 14px; text-align:left}
input.text{padding:10px 12px; border-radius:12px; border:1px solid var(--stroke); background: rgba(255,255,255,0.04); color:var(--fg); outline:none; pointer-events:auto}
input.text:focus{border-color: rgba(159,245,168,0.35);}

.buttons{display:grid; grid-template-columns: 1fr; gap:10px; margin-top:10px;}
button{appearance:none; border:1px solid var(--stroke); background: rgba(255,255,255,0.05); color:var(--fg); padding:10px 12px; border-radius:12px; font-weight:650; cursor:pointer;}
button:hover{border-color: rgba(159,245,168,0.35); background: rgba(255,255,255,0.08)}
button.primary{border-color: rgba(159,245,168,0.35); background: rgba(159,245,168,0.10)}
.controlsList{margin:10px 0 0 18px; color:var(--muted)}

.controlsGrid{display:grid; grid-template-columns:repeat(2, minmax(0,1fr)); gap:10px; margin-top:10px}
.ctl{border:1px solid var(--stroke); border-radius:14px; padding:10px 12px; background:rgba(0,0,0,.14)}
.ctl .k{font-weight:800; font-size:13px; margin-bottom:4px}
.ctl .d{color:var(--muted); font-size:12px; line-height:1.25}
@media (max-width: 700px){ .controlsGrid{grid-template-columns:1fr;} }

.craftList{display:grid; grid-template-columns: 1fr; gap:10px; margin-top:10px;}

/* Crafting catalog (full-screen) */
.craftCatalog{width:min(1200px, 96vw); max-width:96vw}
#crafting .card.craftCatalog{padding:16px}
.craftTopbar{display:flex; align-items:flex-start; justify-content:space-between; gap:12px}
.craftBody{display:grid; grid-template-columns:180px 1fr 360px; gap:14px; margin-top:12px}
.craftCats{display:flex; flex-direction:column; gap:8px}
.craftCatBtn{width:100%; text-align:left; padding:10px 10px; border-radius:10px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.18); color:rgba(255,255,255,.92); cursor:pointer}
.craftCatBtn.active{border-color:rgba(159,245,168,.35); background:rgba(159,245,168,.10)}
.craftGridWrap{min-height:480px; max-height:70vh; overflow:auto; border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px; background:rgba(0,0,0,.12)}
.craftGrid{display:grid; grid-template-columns:repeat(auto-fill, minmax(180px, 1fr)); gap:10px}
.craftCard{border:1px solid rgba(255,255,255,.10); border-radius:12px; padding:10px; background:rgba(0,0,0,.18); cursor:pointer}
.craftCard.active{border-color:rgba(74,163,255,.35); background:rgba(74,163,255,.10)}
.craftCardTop{display:flex; align-items:center; gap:10px}
.craftCardIco{font-size:26px}
.craftCardName{font-weight:700}
.craftCardCost{margin-top:8px; font-size:12px; opacity:.8; line-height:1.25}
.craftDetail{border:1px solid rgba(255,255,255,.08); border-radius:12px; padding:10px; background:rgba(0,0,0,.12); display:flex; flex-direction:column; gap:10px}
#craftPreview{width:100%; height:220px; border-radius:10px; background:rgba(0,0,0,.30); border:1px solid rgba(255,255,255,.08)}
.craftPreviewIcon{width:100%; height:220px; display:flex; align-items:center; justify-content:center; font-size:72px; border-radius:10px; background:rgba(0,0,0,.30); border:1px solid rgba(255,255,255,.08)}
.craftDetailTitle{font-weight:800; font-size:16px}
.craftDetailCost{margin-top:10px; display:flex; flex-direction:column; gap:6px; font-size:13px}
.craftCostLine{display:flex; align-items:center; justify-content:space-between; gap:10px; padding:6px 8px; border-radius:10px; border:1px solid rgba(255,255,255,.08); background:rgba(0,0,0,.14)}
.craftCostLine.ok{border-color:rgba(159,245,168,.22)}
.craftCostLine.bad{border-color:rgba(255,120,120,.22)}

@media (max-width: 980px){
  .craftBody{grid-template-columns:1fr;}
  .craftCats{flex-direction:row; flex-wrap:wrap}
  .craftCatBtn{width:auto}
}
.craftRow{border:1px solid var(--stroke); border-radius:12px; padding:10px; background: rgba(255,255,255,0.04)}
.craftTop{display:flex; align-items:center; justify-content:space-between; gap:10px;}
.craftName{font-weight:800;}
.craftReq{margin-top:6px; color:var(--muted); font-size:12px;}
.craftRow button{pointer-events:auto;}

.invGrid{display:grid; grid-template-columns: repeat(6, 1fr); gap:8px; margin-top:10px; align-content:start; grid-auto-rows:minmax(50px, auto);} 

/* Inventory modal: repaginado para leitura/atalhos */
.invCard{width:min(96vw, 1100px); max-width:none;}
.invTopbar{display:flex; align-items:flex-start; justify-content:space-between; gap:16px; margin-bottom:10px}
.invLegend{display:grid; gap:4px; text-align:right; padding:8px 10px; border:1px solid rgba(255,255,255,.12); border-radius:10px; background:rgba(255,255,255,.03)}
.invHotbarMirror{display:grid; grid-template-columns:repeat(10,minmax(0,1fr)); gap:6px; margin-top:8px}
.invHotCell{border:1px solid rgba(255,255,255,.14); border-radius:10px; background:rgba(255,255,255,.04); min-height:36px; display:flex; align-items:center; justify-content:space-between; padding:4px 6px}
.invHotCell .k{font-size:11px; opacity:.8; font-weight:800}
.invHotCell .i{font-size:15px; line-height:1}
.invHotCell.fixed{border-color:rgba(255,200,140,.45); background:rgba(255,180,106,.10)}
.invHotCell.active{outline:2px solid rgba(74,163,255,.75)}
.invBody{display:grid; grid-template-columns: 1.8fr 1fr; gap:16px; margin-top:10px; min-height:0}
.invMain,.invEquip{padding:12px; border:1px solid rgba(255,255,255,.10); border-radius:14px; background:rgba(0,0,0,.16); min-height:0}
.invMain{overflow:auto}
.invEquip{overflow:hidden}
.invSectionTitle{font-weight:800; margin-bottom:10px; letter-spacing:.2px}

/* Equipamentos em silhueta de corpo */
.invEquipBody{display:grid; grid-template-columns:1fr 1fr 1fr; grid-template-areas:
  ". hat ."
  "gloves shirt backpack"
  ". pants ."
  ". boots .";
  gap:10px; align-items:stretch}
.equipSlot[data-eq="hat"]{grid-area:hat}
.equipSlot[data-eq="shirt"]{grid-area:shirt}
.equipSlot[data-eq="gloves"]{grid-area:gloves}
.equipSlot[data-eq="pants"]{grid-area:pants}
.equipSlot[data-eq="boots"]{grid-area:boots}
.equipSlot[data-eq="backpack"]{grid-area:backpack}

.equipSlot{border:1px solid rgba(255,255,255,.10); border-radius:10px; padding:8px; background:rgba(255,255,255,0.03); cursor:pointer; min-height:58px}
.equipSlot:hover{border-color:rgba(74,163,255,.35); background:rgba(74,163,255,.06)}
.equipLabel{font-size:12px; color:var(--muted); font-weight:700}
.equipItem{margin-top:6px; min-height:18px; font-weight:800; display:flex; align-items:center; justify-content:center; gap:8px}
.equipItem .left{display:flex; align-items:center; gap:8px}
.equipIconOnly{font-size:22px; line-height:1}
.equipDurMini{font-variant-numeric:tabular-nums; font-size:10px; color:rgba(255,255,255,.78); border:1px solid rgba(255,255,255,.18); border-radius:8px; padding:1px 5px}
.equipDur{font-variant-numeric: tabular-nums; font-size:12px; color:rgba(255,255,255,.72)}
.invBuffLine{margin-top:10px}

@media (max-width: 1100px){
  .invBody{grid-template-columns:1fr;}
  .invLegend{text-align:left}
}

.invSlot{border:1px solid var(--stroke); border-radius:10px; padding:6px 7px; min-height:50px; background: rgba(255,255,255,0.04)}
.invSlot.invEmpty{background: rgba(255,255,255,0.02);}
.invSlot.draggable{cursor: grab;}
.invSlot.draggable:active{cursor: grabbing;}
.invTop{display:flex; align-items:center; gap:8px;}
.invIcon{font-size:16px; line-height:1}
.invName{font-weight:700; font-size:11px;}
.invHotBadge{margin-left:auto; min-width:18px; height:18px; border-radius:9px; display:inline-flex; align-items:center; justify-content:center; font-size:11px; font-weight:800; color:#fff; background:rgba(74,163,255,.85); border:1px solid rgba(255,255,255,.25)}
.invSlot.selected{outline:2px solid rgba(74,163,255,.75); background:rgba(74,163,255,.10)}
.invQty{margin-top:4px; font-variant-numeric: tabular-nums; color:var(--muted); font-size:11px}
.invEmpty{opacity:0.55}

/* Hide HUD on menu */
body.state-menu #reticle{display:none;}
body.state-menu #toast{display:none;}
body.state-menu #hud{opacity:0.95;}
body.state-menu #stats{opacity:0.85;}

body.state-menu #hud{display:none;}

.interactHint{position:absolute;left:50%;top:58%;transform:translateX(-50%);padding:8px 10px;border:1px solid rgba(255,255,255,.12);border-radius:12px;background:rgba(0,0,0,.35);backdrop-filter: blur(6px);font-size:12px;color:rgba(255,255,255,.9);max-width:min(560px,90vw);text-align:center}

/* Action wheel (now: buttons grid) */
#wheel{display:none;}
#actionWheel.overlay{background:rgba(0,0,0,.45); pointer-events:auto;}

.wheel{
  position:relative;
  width:360px;
  max-width:92vw;
  height:auto;
  border-radius:18px;
  background:rgba(0,0,0,.28);
  border:1px solid rgba(255,255,255,.12);
  backdrop-filter: blur(6px);
  padding:14px;
  display:grid;
  gap:10px;
}

/* Legacy center/labels removed */
.wheelCenter{display:none;}
.wheelLabel{display:none;}

.wheelBtn{
  appearance:none;
  border:1px solid rgba(255,255,255,.14);
  background:rgba(0,0,0,.25);
  color:#fff;
  font-weight:800;
  border-radius:12px;
  padding:12px 10px;
  cursor:pointer;
  user-select:none;
  transition:background .08s ease, border-color .08s ease, transform .08s ease;
}

/* Highlight only on hover */
.wheelBtn:hover{
  background:rgba(255,182,106,.14);
  border-color:rgba(255,182,106,.55);
  transform:translateY(-1px);
}

.wheelBtn.danger{border-color:rgba(255,120,120,.35)}
.wheelBtn.danger:hover{
  background:rgba(255,120,120,.14);
  border-color:rgba(255,120,120,.70);
}

/* Forge UI */
body.forge-open #forge.overlay{display:flex;}
body.forge-open #inventory.overlay{display:none;}

#forge.overlay{background:rgba(0,0,0,.52)}
#forge .card.forgePanel{width:min(96vw, 1400px); height:min(92vh, 980px); max-width:none; display:flex; flex-direction:column}
#chest .card.forgePanel{width:min(96vw, 1400px); height:min(92vh, 980px); max-width:none; display:flex; flex-direction:column}

.forgeHeader{display:flex;justify-content:space-between;gap:14px;align-items:flex-start}

.forgeWide{flex:1; display:grid; grid-template-columns: 1.4fr 1.0fr 1.0fr; gap:16px; margin-top:10px; min-height:0}
/* Chest modal: 50/50 between inventory and chest */
#chest .forgeWide{grid-template-columns: 1fr 1fr}
.forgeBlock{padding:14px; border:1px solid rgba(255,255,255,.10); border-radius:14px; background:rgba(0,0,0,.16); min-height:0; overflow:auto}
.forgeBlockTitle{font-weight:800; letter-spacing:.2px; margin-bottom:8px}

.forgeInvGrid{margin-top:10px}

.forgeHero{display:flex; align-items:center; justify-content:space-between; gap:10px; margin:2px 0 10px}
.forgeFlame{font-size:46px; opacity:.55; filter:grayscale(0.25)}
.forgeFlame.on{opacity:1; animation: forgePulse 0.45s infinite alternate}
@keyframes forgePulse{from{transform:scale(1)} to{transform:scale(1.08)}}
.forgeHint{font-size:13px; line-height:1.35}

.forgeGrid{display:grid; grid-template-columns: 1fr 1fr; gap:12px}
.forgeTitle{font-weight:800; margin:2px 0 4px}
.forgeTitle.small{font-weight:800; font-size:12px; opacity:.9}
.forgeSlots{display:grid; grid-template-columns:repeat(2,1fr); gap:10px; margin-top:8px; align-content:start; grid-auto-rows:minmax(74px, auto)}
.forgeOutSlots{grid-template-columns:repeat(2,1fr)}

/* Chest: use more columns (15 slots = 5x3) */
body.chest-open #chestSlots.forgeSlots{grid-template-columns:repeat(5,1fr)}

.forgeSlot{min-height:74px; border-radius:12px; border:1px solid rgba(255,255,255,.10); background:rgba(0,0,0,.22); padding:10px; display:flex; flex-direction:column; justify-content:space-between; cursor:pointer}
.forgeSlot.empty{opacity:.55}
.forgeSlot .line1{display:flex; justify-content:space-between; align-items:center}
.forgeSlot .ico{font-size:22px}
.forgeSlot .qty{font-size:12px; opacity:.75}

.forgeStat{margin-top:8px; font-size:12px; color:rgba(255,255,255,.72)}

button.wide{width:100%; padding:12px 14px; margin-top:10px}
#btnForgeStart.on{background:rgba(159,245,168,0.18); border-color:rgba(159,245,168,0.38)}

.forgeProg{margin-top:12px}
.forgeProgTop{display:flex; justify-content:space-between; align-items:baseline; gap:10px}
.forgeBar{height:10px; border-radius:999px; background:rgba(255,255,255,.10); overflow:hidden; margin-top:6px}
.forgeBarFill{height:100%; width:0%; background:linear-gradient(90deg, rgba(255,182,106,.75), rgba(255,120,120,.75));}
